<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>student_mis_postgre documentation</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
	   <link rel="stylesheet" href="../styles/style.css">
        <link rel="stylesheet" href="../styles/dark.css">
    </head>
    <body>
          <script>
               // Blocking script to avaoid flickering dark mode
               // Dark mode toggle button
               var useDark = window.matchMedia('(prefers-color-scheme: dark)');
               var darkModeState = useDark.matches;
               var $darkModeToggleSwitchers = document.querySelectorAll('.dark-mode-switch input');
               var $darkModeToggles = document.querySelectorAll('.dark-mode-switch');
               var darkModeStateLocal = localStorage.getItem('compodoc_darkmode-state');

               function checkToggle(check) {
                    for (var i = 0; i < $darkModeToggleSwitchers.length; i++) {
                         $darkModeToggleSwitchers[i].checked = check;
                    }
               }

               function toggleDarkMode(state) {
                    if (window.localStorage) {
                         localStorage.setItem('compodoc_darkmode-state', state);
                    }

                    checkToggle(state);

                    const hasClass = document.body.classList.contains('dark');

                    if (state) {
                         for (var i = 0; i < $darkModeToggles.length; i++) {
                              $darkModeToggles[i].classList.add('dark');
                         }
                         if (!hasClass) {
                              document.body.classList.add('dark');
                         }
                    } else {
                         for (var i = 0; i < $darkModeToggles.length; i++) {
                              $darkModeToggles[i].classList.remove('dark');
                         }
                         if (hasClass) {
                              document.body.classList.remove('dark');
                         }
                    }
               }

               useDark.addEventListener('change', function (evt) {
                    toggleDarkMode(evt.matches);
               });
               if (darkModeStateLocal) {
                    darkModeState = darkModeStateLocal === 'true';
               }
               toggleDarkMode(darkModeState);

               if ($darkModeToggles.length > 0) {
                    for (var i = 0; i < $darkModeToggleSwitchers.length; i++) {
                         $darkModeToggleSwitchers[i].addEventListener('change', function (event) {
                              darkModeState = !darkModeState;
                              toggleDarkMode(darkModeState);
                         });
                    }
               }
          </script>

        <div class="navbar navbar-default navbar-fixed-top d-block d-sm-none">
            <a href="../" class="navbar-brand">student_mis_postgre documentation</a>
            <button type="button" class="btn btn-default btn-menu ion-ios-menu" id="btn-menu"></button>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
                <div id="book-search-input" role="search"><input type="text" placeholder="Type to search"></div>            <compodoc-menu></compodoc-menu>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="hidden-xs menu">
                   <compodoc-menu mode="normal"></compodoc-menu>
               </div>
               <!-- START CONTENT -->
               <div class="content injectable">
                   <div class="content-data">








<ol class="breadcrumb">
  <li class="breadcrumb-item">Injectables</li>
  <li class="breadcrumb-item" >MarksService</li>
</ol>

<ul class="nav nav-tabs" role="tablist">
        <li class="nav-item">
            <a href="#info" 
                class="nav-link"
                class="nav-link active"
                role="tab" id="info-tab" data-bs-toggle="tab" data-link="info">Info</a>
        </li>
        <li class="nav-item">
            <a href="#source" 
                class="nav-link"
                
                role="tab" id="source-tab" data-bs-toggle="tab" data-link="source">Source</a>
        </li>
</ul>

<div class="tab-content">
    <div class="tab-pane fade active in" id="info">
        <p class="comment">
            <h3>File</h3>
        </p>
        <p class="comment">
            <code>src/marks/marks.service.ts</code>
        </p>





            <section data-compodoc="block-index">
    <h3 id="index">Index</h3>
    <table class="table table-sm table-bordered index-table">
        <tbody>

                <tr>
                    <td class="col-md-4">
                        <h6><b>Methods</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#create" >create</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#createAll" >createAll</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#findAll" >findAll</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#findExistingMark" >findExistingMark</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#findMarksByClassId" >findMarksByClassId</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#findMarksByStudentId" >findMarksByStudentId</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#findOne" >findOne</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#getPercentageByStudentId" >getPercentageByStudentId</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#passPercentageBySubject" >passPercentageBySubject</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#remove" >remove</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#update" >update</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#updateMarksByStudentId" >updateMarksByStudentId</a>
                            </li>
                        </ul>
                    </td>
                </tr>





        </tbody>
    </table>
</section>

            <section data-compodoc="block-constructor">
    <h3 id="constructor">Constructor</h3>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
<code>constructor(marksRepository: <a href="../entitys/Marks.html" target="_self">Repository&lt;Marks&gt;</a>, subjectService: <a href="../injectables/SubjectService.html" target="_self">SubjectService</a>, studentService: <a href="../injectables/StudentService.html" target="_self">StudentService</a>)</code>
                    </td>
                </tr>
                        <tr>
                            <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="15" class="link-to-prism">src/marks/marks.service.ts:15</a></div>
                            </td>
                        </tr>

                <tr>
                    <td class="col-md-4">
                            <div>
                                    <b>Parameters :</b>
                                    <table class="params">
                                        <thead>
                                            <tr>
                                                <td>Name</td>
                                                    <td>Type</td>
                                                <td>Optional</td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                                <tr>
                                                        <td>marksRepository</td>
                                                  
                                                        <td>
                                                                        <code><a href="../entitys/Marks.html" target="_self" >Repository&lt;Marks&gt;</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                                <tr>
                                                        <td>subjectService</td>
                                                  
                                                        <td>
                                                                        <code><a href="../injectables/SubjectService.html" target="_self" >SubjectService</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                                <tr>
                                                        <td>studentService</td>
                                                  
                                                        <td>
                                                                        <code><a href="../injectables/StudentService.html" target="_self" >StudentService</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                        </tbody>
                                    </table>
                            </div>
                    </td>
                </tr>
            </tbody>
        </table>
</section>

            <section data-compodoc="block-methods">
    
    <h3 id="methods">
        Methods
    </h3>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="create"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>create</b></span>
                        <a href="#create"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>create(createMarkDto: <a href="../classes/CreateMarkDto.html" target="_self">CreateMarkDto</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="23"
                                    class="link-to-prism">src/marks/marks.service.ts:23</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>createMarkDto</td>
                                            <td>
                                                            <code><a href="../classes/CreateMarkDto.html" target="_self" >CreateMarkDto</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>    <code>unknown</code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="createAll"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>createAll</b></span>
                        <a href="#createAll"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>createAll(createMarkDtos: <a href="../classes/CreateMarkDto.html" target="_self">CreateMarkDto[]</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="59"
                                    class="link-to-prism">src/marks/marks.service.ts:59</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>createMarkDtos</td>
                                            <td>
                                                            <code><a href="../classes/CreateMarkDto.html" target="_self" >CreateMarkDto[]</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>    <code>unknown</code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="findAll"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>findAll</b></span>
                        <a href="#findAll"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>findAll()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="303"
                                    class="link-to-prism">src/marks/marks.service.ts:303</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                        <div class="io-description">
                            <b>Returns : </b>    <code>unknown</code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="findExistingMark"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>findExistingMark</b></span>
                        <a href="#findExistingMark"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>findExistingMark(studentId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, subjectId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, academicYear: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="216"
                                    class="link-to-prism">src/marks/marks.service.ts:216</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>studentId</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>subjectId</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>academicYear</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>    <code>unknown</code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="findMarksByClassId"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>findMarksByClassId</b></span>
                        <a href="#findMarksByClassId"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>findMarksByClassId(classId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="148"
                                    class="link-to-prism">src/marks/marks.service.ts:148</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>classId</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>    <code>unknown</code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="findMarksByStudentId"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>findMarksByStudentId</b></span>
                        <a href="#findMarksByStudentId"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>findMarksByStudentId(studentId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="102"
                                    class="link-to-prism">src/marks/marks.service.ts:102</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>studentId</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>    <code>unknown</code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="findOne"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>findOne</b></span>
                        <a href="#findOne"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>findOne(id: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="307"
                                    class="link-to-prism">src/marks/marks.service.ts:307</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>id</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>    <code>unknown</code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getPercentageByStudentId"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>getPercentageByStudentId</b></span>
                        <a href="#getPercentageByStudentId"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getPercentageByStudentId(studentId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="263"
                                    class="link-to-prism">src/marks/marks.service.ts:263</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>studentId</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>    <code>unknown</code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="passPercentageBySubject"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>passPercentageBySubject</b></span>
                        <a href="#passPercentageBySubject"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>passPercentageBySubject()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="283"
                                    class="link-to-prism">src/marks/marks.service.ts:283</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                        <div class="io-description">
                            <b>Returns : </b>    <code>Promise&lt;any&gt;</code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="remove"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>remove</b></span>
                        <a href="#remove"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>remove(id: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="311"
                                    class="link-to-prism">src/marks/marks.service.ts:311</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>id</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="update"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>update</b></span>
                        <a href="#update"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>update(id: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, data: <a href="../classes/CreateMarkDto.html" target="_self">CreateMarkDto</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="229"
                                    class="link-to-prism">src/marks/marks.service.ts:229</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>id</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>data</td>
                                            <td>
                                                            <code><a href="../classes/CreateMarkDto.html" target="_self" >CreateMarkDto</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>    <code>unknown</code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="updateMarksByStudentId"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>updateMarksByStudentId</b></span>
                        <a href="#updateMarksByStudentId"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>updateMarksByStudentId(createMarkDto: <a href="../classes/CreateMarkDto.html" target="_self">CreateMarkDto</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="185"
                                    class="link-to-prism">src/marks/marks.service.ts:185</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>createMarkDto</td>
                                            <td>
                                                            <code><a href="../classes/CreateMarkDto.html" target="_self" >CreateMarkDto</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>    <code>unknown</code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
</section>

    </div>


    <div class="tab-pane fade  tab-source-code" id="source">
        <pre class="line-numbers compodoc-sourcecode"><code class="language-typescript">import { Injectable, NotFoundException } from &#x27;@nestjs/common&#x27;;
import { InjectRepository } from &#x27;@nestjs/typeorm&#x27;;
import { Repository } from &#x27;typeorm&#x27;;

import { CreateMarkDto } from &#x27;./dto/create-mark.dto&#x27;;
import { SubjectService } from &#x27;src/subject/subject.service&#x27;;
import { StudentService } from &#x27;src/student/student.service&#x27;;
import { Marks } from &#x27;./entities/mark.entity&#x27;;
import { ResultEnum } from &#x27;src/common/enums/result.enum&#x27;;


@Injectable()
export class MarksService {
  constructor(
    @InjectRepository(Marks)
    private marksRepository: Repository&lt;Marks&gt;,
    private subjectService: SubjectService,
    private studentService: StudentService
  ) {}

  async create(createMarkDto: CreateMarkDto){
    const { student_id, subjectName, classId, academicYear, marksObtained } &#x3D; createMarkDto;

    // Find student
    const student &#x3D; await this.studentService.findOne(student_id);
    if (!student) {
      throw new Error(&#x27;Student not found&#x27;);
    }

    // Find subject
    const subject &#x3D; await this.subjectService.findBySubjectNameAndClassId(subjectName, classId);
    if (!subject) {
      throw new Error(&#x27;Subject not found&#x27;);
    }

    // Check if marks obtained is greater than pass marks
    const result &#x3D; marksObtained &gt;&#x3D; subject.passMarks ? ResultEnum.PASS : ResultEnum.FAIL;

    // Check if the mark already exists
    const existingMark &#x3D; await this.findExistingMark(student_id, subject.id, academicYear);
    console.log(&#x27;existingMark&#x27;,existingMark)
    if (existingMark) {
      return { message: &#x27;Record already exists&#x27; };
    }
  
    const mark &#x3D; this.marksRepository.create({
      student,
      subject,
      academicYear,
      marksObtained,
      result
    });

    return this.marksRepository.save(mark);
}

  async createAll(createMarkDtos: CreateMarkDto[]) {
    const response &#x3D; [];
  
    for (const createMarkDto of createMarkDtos) {
      const { student_id, subjectName, classId, academicYear, marksObtained } &#x3D; createMarkDto;
  
      const student &#x3D; await this.studentService.findOne(student_id);
      if (!student) {
        throw new Error(&#x60;Student with ID ${student_id} not found&#x60;);
      }
  
      const subject &#x3D; await this.subjectService.findBySubjectNameAndClassId(subjectName, classId);
      if (!subject) {
        throw new Error(&#x60;Subject &#x27;${subjectName}&#x27; not found for class ${classId}&#x60;);
      }
  
      const existingMark &#x3D; await this.findExistingMark(student_id, subject.id, academicYear);
      console.log(&#x27;existingmark&#x27;,existingMark)
  
      let result: ResultEnum;
      if (existingMark) {
        existingMark.marksObtained &#x3D; marksObtained;
        result &#x3D; marksObtained &gt;&#x3D; subject.passMarks ? ResultEnum.PASS : ResultEnum.FAIL;
        existingMark.result &#x3D; result;
        await this.marksRepository.save(existingMark);
        response.push({ message: &#x27;Record updated&#x27;, data: existingMark });
      } else {
        result &#x3D; marksObtained &gt;&#x3D; subject.passMarks ? ResultEnum.PASS : ResultEnum.FAIL;
        const mark &#x3D; this.marksRepository.create({
          student,
          subject,
          academicYear,
          marksObtained,
          result,
        });
        await this.marksRepository.save(mark);
        response.push({ message: &#x27;Record created&#x27;, data: mark });
      }
    }
  
    return response;
  }
  
  async findMarksByStudentId(studentId: string) {
    const marks &#x3D; await this.marksRepository.createQueryBuilder(&quot;mark&quot;)
      .leftJoin(&quot;mark.subject&quot;, &quot;subject&quot;)
      .leftJoin(&quot;mark.student&quot;, &quot;student&quot;)
      .leftJoin(&quot;student.class&quot;, &quot;class&quot;)
      .select([
        &quot;student.id as studentId&quot;,
        &quot;student.firstName as firstname&quot;,
        &quot;student.lastName as lastname&quot;,
        &quot;mark.academicYear as academicyear&quot;,
        &quot;subject.subjectName as subjectname&quot;,
        &quot;mark.marksObtained as marksobtained&quot;,
        &quot;subject.fullMarks as fullmarks&quot;,
        &quot;subject.passMarks as passmarks&quot;,
        &quot;mark.result as result&quot;,
        &quot;class.className as classname&quot;
      ])
      .where(&quot;student.id &#x3D; :studentId&quot;, { studentId })
      .orderBy(&quot;mark.academicYear&quot;, &quot;DESC&quot;)
      .getRawMany();
    console.log(&#x27;marks&#x27;,marks)
    // Group marks by student
    const marksByStudent &#x3D; {
      studentid:&#x27;&#x27;,
      firstname: &#x27;&#x27;,
      lastname:&#x27;&#x27;,
      classname:&#x27;&#x27;,
      academicYears: {}
    };

    marks.forEach(mark &#x3D;&gt; {
      const { studentid, firstname,lastname,classname, academicyear, subjectname, marksobtained, fullmarks, passmarks,result } &#x3D; mark;
      marksByStudent.studentid &#x3D; studentid;
      marksByStudent.firstname &#x3D; firstname;
      marksByStudent.lastname &#x3D; lastname;
      marksByStudent.classname &#x3D; classname;

      if (!marksByStudent.academicYears[academicyear]) {
        marksByStudent.academicYears[academicyear] &#x3D; [];
      }
      marksByStudent.academicYears[academicyear].push({ subjectname, marksobtained, fullmarks, passmarks,result });
    });
  
    return marksByStudent;
  }

  async findMarksByClassId(classId: string) {
    const marks &#x3D; await this.marksRepository.createQueryBuilder(&quot;mark&quot;)
      .leftJoin(&quot;mark.subject&quot;, &quot;subject&quot;)
      .leftJoin(&quot;mark.student&quot;, &quot;student&quot;)
      .leftJoin(&quot;student.class&quot;, &quot;class&quot;)
      .select([
        &quot;student.id as studentId&quot;,
        &quot;student.firstName as studentName&quot;,
        &quot;class.className as className&quot;,
        &quot;mark.academicYear as academicyear&quot;,
        &quot;subject.subjectName as subjectname&quot;,
        &quot;mark.marksObtained as marksobtained&quot;,
        &quot;mark.result as result&quot;,
        &quot;subject.fullMarks as fullmarks&quot;,
        &quot;subject.passMarks as passmarks&quot;
      ])
      .where(&quot;class.id &#x3D; :classId&quot;, { classId })
      .orderBy(&quot;student.id&quot;)
      .addOrderBy(&quot;mark.academicYear&quot;)
      .getRawMany();
  console.log(&#x27;marks&#x27;,marks)
    // Group marks by student
    const marksByStudent &#x3D; {};
    marks.forEach(mark &#x3D;&gt; {
      const { studentid, studentname,classname,academicyear, subjectname, marksobtained, fullmarks, passmarks,result  } &#x3D; mark;
      if (!marksByStudent[studentid]) {
        marksByStudent[studentid] &#x3D; { studentid, studentname,classname, academicYears: {} };
      }
      if (!marksByStudent[studentid].academicYears[academicyear]) {
        marksByStudent[studentid].academicYears[academicyear] &#x3D; [];
      }
      marksByStudent[studentid].academicYears[academicyear].push({subjectname, marksobtained, fullmarks, passmarks,result });
    });
  
    return marksByStudent;
  }
  
  async updateMarksByStudentId(createMarkDto: CreateMarkDto) {
    const { student_id, subjectName, classId, academicYear, marksObtained } &#x3D; createMarkDto;

    // Find student
    const student &#x3D; await this.studentService.findOne(student_id);
    if (!student) {
      throw new Error(&#x27;Student not found&#x27;);
    }

    // Find subject
    const subject &#x3D; await this.subjectService.findBySubjectNameAndClassId(subjectName, classId);
    if (!subject) {
      throw new Error(&#x27;Subject not found&#x27;);
    }

    // Check if marks obtained is greater than pass marks
    const result &#x3D; marksObtained &gt;&#x3D; subject.passMarks ? ResultEnum.PASS : ResultEnum.FAIL;

    // Find the existing mark
    const existingMark &#x3D; await this.findExistingMark(student_id, subject.id, academicYear);
    if (!existingMark) {
      throw new Error(&#x27;Record not found&#x27;);
    }

    // Update marks obtained
    existingMark.marksObtained &#x3D; marksObtained;
    existingMark.result &#x3D; result;

    return this.marksRepository.save(existingMark);
  }

  async findExistingMark(studentId: string, subjectId: string, academicYear: number) {
    const existingMark &#x3D; await this.marksRepository.createQueryBuilder(&quot;mark&quot;)
      .leftJoin(&quot;mark.student&quot;, &quot;student&quot;)
      .leftJoin(&quot;mark.subject&quot;, &quot;subject&quot;)
      .select(&quot;mark.id&quot;, &quot;id&quot;)
      .where(&quot;student.id &#x3D; :studentId&quot;, { studentId })
      .andWhere(&quot;subject.id &#x3D; :subjectId&quot;, { subjectId })
      .andWhere(&quot;mark.academicYear &#x3D; :academicYear&quot;, { academicYear })
      .getRawOne();

    return existingMark;
  }

  async update(id: string, data: CreateMarkDto) {
    const { student_id, subjectName, classId, academicYear, marksObtained } &#x3D; data;

    // Find student
    const student &#x3D; await this.studentService.findOne(student_id);
    if (!student) {
      throw new NotFoundException(&#x60;Student with ID ${student_id} not found&#x60;);
    }

    // Find subject
    const subject &#x3D; await this.subjectService.findBySubjectNameAndClassId(subjectName, classId);
    if (!subject) {
      throw new NotFoundException(&#x60;Subject &#x27;${subjectName}&#x27; not found for class ${classId}&#x60;);
    }

    // Check if marks obtained is greater than pass marks
    const result &#x3D; marksObtained &gt;&#x3D; subject.passMarks ? ResultEnum.PASS : ResultEnum.FAIL;

    // Find the mark to update
    const mark &#x3D; await this.marksRepository.findOne({ where: { id: id } });
    if (!mark) {
      throw new NotFoundException(&#x60;Mark with ID ${id} not found&#x60;);
    }

    // Update mark properties
    mark.student &#x3D; student;
    mark.subject &#x3D; subject;
    mark.academicYear &#x3D; academicYear;
    mark.marksObtained &#x3D; marksObtained;
    mark.result &#x3D; result;

    return this.marksRepository.save(mark);
  }

  async getPercentageByStudentId(studentId: string){
    const marksByYearQuery &#x3D; this.marksRepository.createQueryBuilder(&#x27;marks&#x27;)
      .innerJoin(&#x27;marks.subject&#x27;, &#x27;subject&#x27;)
      .select(&#x27;marks.academicYear&#x27;, &#x27;academicYear&#x27;)
      .addSelect(&#x27;SUM(marks.marksObtained)&#x27;, &#x27;totalMarks&#x27;)
      .addSelect(&#x27;SUM(subject.fullMarks)&#x27;, &#x27;totalFullMarks&#x27;)
      .where(&#x27;marks.student &#x3D; :studentId&#x27;, { studentId })
      .groupBy(&#x27;marks.academicYear&#x27;)
      .orderBy(&#x27;marks.academicYear&#x27;, &#x27;ASC&#x27;);

    const marksByYear &#x3D; await marksByYearQuery.getRawMany();

    const percentages &#x3D; marksByYear.map(row &#x3D;&gt; ({
      academicYear: parseInt(row.academicYear),
      percentage: (row.totalMarks / row.totalFullMarks) * 100,
    }));

    return percentages;
  }

  async passPercentageBySubject(): Promise&lt;any&gt; {
    const passPercentageResults &#x3D; await this.marksRepository
      .createQueryBuilder(&#x27;marks&#x27;)
      .select([
        &#x27;marks.subjectId&#x27;,
        &#x27;subject.subjectName&#x27;,
        &#x27;ARRAY_AGG(DISTINCT marks.academicYear) as academicYears&#x27;,
        &#x27;ARRAY_AGG(COUNT(*)) as totalStudents&#x27;,
        &#x27;ARRAY_AGG(CASE WHEN marks.result &#x3D; \&#x27;PASS\&#x27; THEN 1 ELSE 0 END) as passedStudents&#x27;,
        &#x27;ARRAY_AGG(CASE WHEN marks.result &#x3D; \&#x27;PASS\&#x27; THEN 1 ELSE 0 END) / COUNT(*) * 100 as passPercentage&#x27;,
      ])
      .leftJoin(&#x27;marks.subject&#x27;, &#x27;subject&#x27;)
      .groupBy(&#x27;marks.subjectId, subject.subjectName&#x27;)
      .orderBy(&#x27;marks.subjectId&#x27;)
      .getRawMany();

    return passPercentageResults;
  }


  async findAll(){
    return this.marksRepository.find();
  }

  async findOne(id: string){
    return this.marksRepository.findOne({ where: { id: id } });
  }

  async remove(id: string){
    await this.marksRepository.delete(id);
  }
}
</code></pre>
    </div>

</div>













                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
               <!-- END CONTENT -->
           </div>
       </div>

          <label class="dark-mode-switch">
               <input type="checkbox">
               <span class="slider">
                    <svg class="slider-icon" viewBox="0 0 24 24" fill="none" height="20" stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" width="20" xmlns="http://www.w3.org/2000/svg">
                    <path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"></path>
                    </svg>
               </span>
          </label>

       <script>
            var COMPODOC_CURRENT_PAGE_DEPTH = 1;
            var COMPODOC_CURRENT_PAGE_CONTEXT = 'injectable';
            var COMPODOC_CURRENT_PAGE_URL = 'MarksService.html';
            var MAX_SEARCH_RESULTS = 15;
       </script>

       <script src="../js/libs/custom-elements.min.js"></script>
       <script src="../js/libs/lit-html.js"></script>

       <script src="../js/menu-wc.js" defer></script>
       <script nomodule src="../js/menu-wc_es5.js" defer></script>

       <script src="../js/libs/bootstrap-native.js"></script>

       <script src="../js/libs/es6-shim.min.js"></script>
       <script src="../js/libs/EventDispatcher.js"></script>
       <script src="../js/libs/promise.min.js"></script>
       <script src="../js/libs/zepto.min.js"></script>

       <script src="../js/compodoc.js"></script>

       <script src="../js/tabs.js"></script>
       <script src="../js/menu.js"></script>
       <script src="../js/libs/clipboard.min.js"></script>
       <script src="../js/libs/prism.js"></script>
       <script src="../js/sourceCode.js"></script>
          <script src="../js/search/search.js"></script>
          <script src="../js/search/lunr.min.js"></script>
          <script src="../js/search/search-lunr.js"></script>
          <script src="../js/search/search_index.js"></script>
       <script src="../js/lazy-load-graphs.js"></script>


    </body>
</html>
